
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Animal, Vegetable, or Mineral?</title>
  <meta name="author" content="Jonathan Camenisch">

  
  <meta name="description" content="Animal, Vegetable, or Mineral? wherein prototypal inheritance models the universe in JavaScript First, a root object: thing = {&#x000A; location: ' &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jcamenisch.github.com/prototypes-in-javascript/">
  <link href="/prototypes-in-javascript/favicon.png" rel="icon">
  <link href="/prototypes-in-javascript/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/prototypes-in-javascript/javascripts/modernizr-2.0.js"></script>
  <script src="/prototypes-in-javascript/javascripts/ender.js"></script>
  <script src="/prototypes-in-javascript/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/prototypes-in-javascript/atom.xml" rel="alternate" title="Animal, Vegetable, or Mineral?" type="application/atom+xml">
  
  

</head>
<body>
  <div id="main">
    <div class='page'>
  <h1>Animal, Vegetable, or Mineral?</h1>
  <p>wherein prototypal inheritance models the universe in JavaScript</p>
</div>
<div class='page'>
  <h3>
    First, a root object:
  </h3>
  <pre>thing = {&#x000A;  location: 'the universe',&#x000A;  organic: false,&#x000A;  motile: false&#x000A;};</pre>
</div>
<div class='page'>
  <h3>Then, to inherit from thing.</h3>
  <p>The old-fashioned way takes 3 lines:</p>
  <pre>ConstructThing = function() {};&#x000A;ConstructThing.prototype = thing;&#x000A;mineral = new ConstructThing();</pre>
  <pre>mineral.location;</pre>
</div>
<div class='page'>
  <h3>We could have the constructor do something:</h3>
  <pre>ConstructThing = function() {&#x000A;  this.createdAt = new Date;&#x000A;};&#x000A;ConstructThing.prototype = thing;&#x000A;mineral = new ConstructThing();</pre>
</div>
<div class='page'>
  <h3>Moving along to the rest of the universe</h3>
  <pre>ConstructMineral = function(){};&#x000A;ConstructMineral.prototype = mineral;</pre>
  <pre>organism = new ConstructThing();&#x000A;organism.organic = true;&#x000A;&#x000A;ConstructOrganism = function(){};&#x000A;ConstructOrganism.prototype = organism;</pre>
  <pre>vegetable = new ConstructOrganism;&#x000A;ConstructVegetable = function(){};&#x000A;ConstructVegetable.prototype = vegetable;</pre>
  <pre>animal = new ConstructOrganism;&#x000A;animal.motile = true;</pre>
  <pre>ConstructAnimal = function(){};&#x000A;ConstructAnimal.prototype = animal;</pre>
  <pre>caveMan = new ConstructAnimal;&#x000A;club = new ConstructVegetable;&#x000A;rock = new ConstructMineral;</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.location });</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.organic });</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.motile });</pre>
</div>
<div class='page'>
  <h3>
    Problems with this approach:
  </h3>
  <ol>
    <li>It&#8217;s rather awkward. (verbose, and conflicted)</li>
    <li>
      The danger of forgetting &#8220;new&#8221;:
      <pre>OtherWindow = function(location) {&#x000A;  this.location = location;&#x000A;}&#x000A;anotherWindow = new OtherWindow(); // fine&#x000A;anotherWindow = OtherWindow();     // doh!</pre>
    </li>
    <li>
      Constructors are not inheritable:
      <pre>[caveMan, club, rock].map(function(o) { return o.createdAt });</pre>
      Back to constructors in a bit&#8230;
    </li>
  </ol>
</div>
<div class='page'>
  <h3>Could there be a less awkward way to inherit?</h3>
  <p>One great answer: ECMAScript5 gives us:</p>
  <pre>something = Object.create(thing);</pre>
  <p>
    We can easily backport this (see http://javascript.crockford.com/prototypal.html):
  </p>
  <pre>Object.create = function (proto) {&#x000A;  function Constructor() {}&#x000A;  Constructor.prototype = proto;&#x000A;  return new Constructor();&#x000A;};</pre>
</div>
<div class='page'>
  <h2>Let&#8217;s set up that taxonomy up again.</h2>
  <pre>thing = {&#x000A;  location: 'the universe',&#x000A;  organic: false,&#x000A;  motile: false&#x000A;};</pre>
  <pre>mineral = Object.create(thing);&#x000A;organism = Object.create(thing);&#x000A;vegetable = Object.create(organism);&#x000A;animal = Object.create(organism);</pre>
  <pre>organism.organic = true;&#x000A;animal.motile = true;</pre>
</div>
<div class='page'>
  <pre>caveMan = Object.create(animal);&#x000A;club = Object.create(vegetable);&#x000A;rock = Object.create(mineral);</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.location });&#x000A;[caveMan, club, rock].map(function(o) { return o.organic });&#x000A;[caveMan, club, rock].map(function(o) { return o.motile });</pre>
</div>
<div class='page'>
  <h2>What about constructors?</h2>
  <p>
    A simple proposal (inspired by
    <a href='http://javascript.crockford.com/prototypal.html'>Crockford</a>
    ):
  </p>
  <pre>thing.initialize = function() {&#x000A;  this.createdAt = new Date;&#x000A;}</pre>
  <pre>thing.beget = function(properties) {&#x000A;  var begotten = Object.create(this);&#x000A;  begotten.initialize;&#x000A;  return begotten;&#x000A;}</pre>
  <pre>mineral = thing.beget();&#x000A;mineral.location;&#x000A;mineral.createdAt;</pre>
</div>
<div class='page'>
  <h2>A step further:</h2>
  <p>Target: provide for initializing properties with</p>
  <pre>// something = thing.beget({prop: 'value', ...});</pre>
</div>
<div class='page'>
  <pre>thing.beget = function(properties) {&#x000A;  var begotten = Object.create(this);&#x000A;  begotten.initialize;&#x000A;  for (key in properties) {&#x000A;    if (properties.hasOwnProperty(key)) {&#x000A;      begotten[key] = properties[key];&#x000A;    }&#x000A;  }&#x000A;  return begotten;&#x000A;};</pre>
</div>
<div class='page'>
  <pre>mineral = thing.beget();&#x000A;organism = thing.beget({organic: true});&#x000A;vegetable = organism.beget();&#x000A;animal = organism.beget({motile: true});</pre>
</div>
<div class='page'>
  <pre>caveMan = animal.beget();&#x000A;club = vegetable.beget();&#x000A;rock = mineral.beget();</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.location });</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.organic });</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.motile });</pre>
  <pre>[caveMan, club, rock].map(function(o) { return o.createdAt });&#x000A;</pre>
</div>
<div class='page'>
  <h2>Recommended Reading</h2>
  <ul>
  <li><a href="http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/">Understanding “Prototypes” in JavaScript</a>, Yehuda Katz</li>
  <li><a href="http://ejohn.org/blog/simple-javascript-inheritance/">Simple JavaScript Inheritance</a>, John Resig</li>
  <li><a href="http://joost.zeekat.nl/constructors-considered-mildly-confusing.html">Constructors considered mildly confusing</a> by Joost Diepenmaat, Zeekat Softwareontwikkeling</li>
  <li><a href="http://javascript.crockford.com/prototypal.html">Prototypal Inheritance in JavaScript</a>, Douglas Crockford</li>
  <li><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain">Inheritance and the prototype chain</a>, MDN</li>
  </ul>
</div>

  </div>
  


</body>
</html>
